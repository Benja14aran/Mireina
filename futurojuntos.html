<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuestro Futuro Juntos üåà</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Estilos para el control de m√∫sica */
        #musicControl {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1001;
            background: linear-gradient(135deg, #fcb69f 0%, #ffecd2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(252, 182, 159, 0.5);
            font-weight: 700;
            font-size: 1.1em;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #musicControl:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(252, 182, 159, 0.7);
        }

        #musicControl.playing {
            animation: musicPulse 2s infinite;
        }

        @keyframes musicPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Arco√≠ris animado */
        .arcoiris-fondo {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 1;
            opacity: 0.15;
        }

        .arcoiris {
            position: absolute;
            width: 300px;
            height: 150px;
            border-radius: 150px 150px 0 0;
            border: 15px solid;
            animation: floatArcoiris 20s ease-in-out infinite;
        }

        @keyframes floatArcoiris {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-30px) rotate(5deg); }
        }

        .stars {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 1;
        }

        .star {
            position: absolute;
            width: 3px;
            height: 3px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }

        .btn-volver {
            display: inline-block;
            background: rgba(255, 255, 255, 0.95);
            color: #fcb69f;
            padding: 15px 35px;
            border-radius: 30px;
            text-decoration: none;
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.25);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .btn-volver:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.35);
            background: white;
        }

        .contenido {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 40px;
            padding: 60px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: fadeIn 1s ease-out;
        }

        h1 {
            color: #fcb69f;
            font-size: 3.8em;
            text-align: center;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .subtitulo {
            text-align: center;
            color: #ffecd2;
            font-size: 1.4em;
            margin-bottom: 50px;
            font-style: italic;
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .mensaje-bienvenida {
            background: linear-gradient(135deg, #fff8f0 0%, #ffe6e0 100%);
            padding: 50px;
            border-radius: 30px;
            margin: 40px 0;
            text-align: center;
            box-shadow: 0 15px 40px rgba(252, 182, 159, 0.3);
            border: 4px solid #fcb69f;
        }

        .mensaje-bienvenida h2 {
            color: #fcb69f;
            font-size: 2.5em;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .mensaje-bienvenida p {
            color: #555;
            font-size: 1.4em;
            line-height: 2;
        }

        /* Imagen destacada mejorada */
        .imagen-destacada {
            text-align: center;
            margin: 50px 0;
            position: relative;
        }

        .imagen-destacada img {
            max-width: 100%;
            height: auto;
            border-radius: 30px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            transition: all 0.5s ease;
            border: 5px solid white;
        }

        .imagen-destacada img:hover {
            transform: scale(1.05) rotate(2deg);
            box-shadow: 0 25px 60px rgba(252, 182, 159, 0.5);
        }

        /* Sue√±os del futuro */
        .suenos-futuro {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 35px;
            margin: 60px 0;
        }

        .sueno {
            background: linear-gradient(135deg, #fff8f0 0%, #ffe6e0 100%);
            padding: 45px;
            border-radius: 30px;
            box-shadow: 0 12px 35px rgba(252, 182, 159, 0.2);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            border: 3px solid transparent;
        }

        .sueno::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(252, 182, 159, 0.15) 0%, transparent 70%);
            transition: all 0.6s ease;
        }

        .sueno:hover {
            transform: translateY(-12px) scale(1.03);
            box-shadow: 0 20px 50px rgba(252, 182, 159, 0.35);
            border-color: #fcb69f;
        }

        .sueno:hover::before {
            top: -30%;
            right: -30%;
        }

        .sueno .icono-sueno {
            font-size: 4.5em;
            text-align: center;
            margin-bottom: 25px;
            animation: float 3s ease-in-out infinite;
        }

        .sueno h3 {
            color: #fcb69f;
            font-size: 2.2em;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 700;
        }

        .sueno p {
            color: #555;
            font-size: 1.25em;
            line-height: 1.9;
            text-align: center;
        }

        /* Mensaje del coraz√≥n */
        .mensaje-corazon {
            background: linear-gradient(135deg, #fff8f0 0%, #ffe6e0 100%);
            padding: 60px;
            border-radius: 35px;
            margin: 60px 0;
            border-left: 10px solid #fcb69f;
            box-shadow: 0 20px 50px rgba(252, 182, 159, 0.3);
            position: relative;
        }

        .mensaje-corazon::before {
            content: 'üíë';
            position: absolute;
            top: 30px;
            right: 40px;
            font-size: 10em;
            opacity: 0.08;
        }

        .mensaje-corazon p {
            color: #555;
            font-size: 1.45em;
            line-height: 2.2;
            text-align: justify;
            margin: 25px 0;
            position: relative;
            z-index: 1;
        }

        .mensaje-corazon .destacado {
            background: linear-gradient(135deg, rgba(252, 182, 159, 0.2), rgba(255, 236, 210, 0.2));
            padding: 35px;
            border-radius: 25px;
            margin: 35px 0;
            border-left: 6px solid #ffecd2;
        }

        .mensaje-corazon .enfasis {
            color: #fcb69f;
            font-weight: 700;
            font-size: 1.1em;
        }

        /* Timeline de vida juntos */
        .timeline-vida {
            position: relative;
            margin: 70px 0;
            padding: 50px 0;
        }

        .timeline-vida::before {
            content: '';
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 5px;
            height: 100%;
            background: linear-gradient(to bottom, #ffecd2, #fcb69f);
            border-radius: 3px;
        }

        .timeline-vida h2 {
            color: #fcb69f;
            font-size: 3em;
            text-align: center;
            margin-bottom: 60px;
            font-weight: 700;
        }

        .fase-vida {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 50px 0;
            position: relative;
        }

        .fase-content {
            width: 45%;
            background: linear-gradient(135deg, #fff8f0 0%, #ffe6e0 100%);
            padding: 40px;
            border-radius: 28px;
            box-shadow: 0 12px 35px rgba(252, 182, 159, 0.25);
            position: relative;
            transition: all 0.4s ease;
        }

        .fase-content:hover {
            transform: translateY(-10px);
            box-shadow: 0 18px 45px rgba(252, 182, 159, 0.35);
        }

        .fase-vida:nth-child(odd) .fase-content {
            margin-right: auto;
        }

        .fase-vida:nth-child(even) .fase-content {
            margin-left: auto;
        }

        .fase-icon {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 80px;
            background: white;
            border: 6px solid #fcb69f;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            z-index: 10;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .fase-content h3 {
            color: #fcb69f;
            font-size: 2em;
            margin-bottom: 18px;
            font-weight: 700;
        }

        .fase-content p {
            color: #555;
            font-size: 1.2em;
            line-height: 1.9;
        }

        /* Promesa final √©pica */
        .promesa-final {
            text-align: center;
            margin: 70px 0 50px 0;
            padding: 70px;
            background: linear-gradient(135deg, #fcb69f 0%, #ffecd2 100%);
            border-radius: 40px;
            color: white;
            box-shadow: 0 25px 60px rgba(252, 182, 159, 0.5);
            position: relative;
            overflow: hidden;
        }

        .promesa-final::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .promesa-final h2 {
            font-size: 3.2em;
            margin-bottom: 30px;
            font-weight: 700;
            position: relative;
            z-index: 1;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .promesa-final p {
            font-size: 1.6em;
            line-height: 2;
            font-weight: 600;
            position: relative;
            z-index: 1;
            margin: 20px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .promesa-final .grito-amor {
            font-size: 2.2em;
            margin-top: 40px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
            animation: pulse 1.5s infinite;
        }

        .corazon {
            position: fixed;
            font-size: 2em;
            pointer-events: none;
            z-index: 999;
            animation: floatUp 4s linear;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-25px); }
        }

        @keyframes floatUp {
            0% { opacity: 1; transform: translateY(0) rotate(0deg); }
            100% { opacity: 0; transform: translateY(-1000px) rotate(360deg); }
        }

        @media (max-width: 768px) {
            .contenido { padding: 40px 25px; }
            h1 { font-size: 2.8em; }
            .suenos-futuro { grid-template-columns: 1fr; }
            .timeline-vida::before { left: 30px; }
            .fase-icon { left: 30px; }
            .fase-content { width: calc(100% - 110px); margin-left: 90px !important; }
            #musicControl { bottom: 20px; right: 20px; font-size: 0.9em; padding: 12px 20px; }
            #songInfo { bottom: 75px; right: 20px; max-width: 200px; }
        }
    </style>
</head>
<body>
    <!-- Reproductor de m√∫sica de fondo -->
    <audio id="backgroundMusic">
        <source src="" type="audio/mpeg">
        Tu navegador no soporta el elemento de audio.
    </audio>

    <!-- Bot√≥n de control de m√∫sica -->
    <div id="musicControl">
        <span id="musicIcon">üéµ</span>
        <span id="musicText">Reproducir M√∫sica</span>
    </div>
    
    <!-- Info de la canci√≥n actual -->
    <div id="songInfo" style="position: fixed; bottom: 90px; right: 30px; z-index: 1001; background: rgba(26, 26, 26, 0.95); color: white; padding: 12px 20px; border-radius: 20px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3); font-size: 0.9em; max-width: 250px; display: none; border: 2px solid #fcb69f;">
        <div style="font-weight: 700; margin-bottom: 5px; color: #ffecd2;">üéµ Reproduciendo:</div>
        <div id="currentSongName" style="font-size: 0.95em; color: #fff;"></div>
    </div>

    <div class="arcoiris-fondo" id="arcoiris"></div>
    <div class="stars" id="stars"></div>

    <div class="container">
        <a href="index.html" class="btn-volver">‚Üê Volver al inicio</a>

        <div class="contenido">
            <h1>üåà Nuestro Futuro Juntos üåà</h1>
            <p class="subtitulo">El cap√≠tulo m√°s hermoso que escribiremos juntos</p>

            <div class="mensaje-bienvenida">
                <h2>üíï Llegaste hasta el Futuro Juntos, mi bb üíï</h2>
                <p>Esto es lo que m√°s quiero: que tengamos una vida adelante nuestros ojos y podamos ser felices con todos, pero <strong>juntos</strong>.</p>
            </div>

            <div class="imagen-destacada">
                <img src="assent/GIF17.gif" alt="Nuestro futuro juntos">
            </div>

            <div class="suenos-futuro">
                <div class="sueno">
                    <div class="icono-sueno">üè°</div>
                    <h3>Nuestro Hogar</h3>
                    <p>Que tengamos una casa, da lo mismo d√≥nde sea ni c√≥mo sea, pero mientras sea un hogar de ambos, todo cambia y todo se vuelve √∫nico. Un lugar donde construir nuestros sue√±os juntos.</p>
                </div>

                <div class="sueno">
                    <div class="icono-sueno">üë∂</div>
                    <h3>Nuestros Hijos</h3>
                    <p>Que tengamos hijos m√°s adelante, es algo que siempre hablamos y nos gustar√≠a tener: 1 ni√±o y 1 ni√±a. Formar una familia hermosa llena de amor.</p>
                </div>

                <div class="sueno">
                    <div class="icono-sueno">üêï</div>
                    <h3>Nuestras Mascotas</h3>
                    <p>Tener mascotas como un gordo salchicha o un Golden Retriever. Sea cual sea la mascota que nos acompa√±e en el proceso, ser√° parte de nuestra familia.</p>
                </div>

                <div class="sueno">
                    <div class="icono-sueno">‚òÄÔ∏è</div>
                    <h3>Despertar Juntos</h3>
                    <p>Cada ma√±ana poder abrir los ojos y verte a mi lado. Sin distancia, sin despedidas, solo nosotros construyendo cada d√≠a juntos.</p>
                </div>

                <div class="sueno">
                    <div class="icono-sueno">üåô</div>
                    <h3>Dormir Abrazados</h3>
                    <p>Todas las noches poder abrazarte antes de dormir, saber que estar√°s ah√≠ cuando despierte, sentir tu calor real, no virtual.</p>
                </div>

                <div class="sueno">
                    <div class="icono-sueno">‚àû</div>
                    <h3>Para Siempre</h3>
                    <p>Envejecer juntos, crear miles de recuerdos m√°s, vivir aventuras, superar obst√°culos... todo juntos, siempre juntos, hasta el infinito.</p>
                </div>
            </div>

            <div class="timeline-vida">
                <h2>üìñ Nuestra Historia Futura üìñ</h2>

                <div class="fase-vida">
                    <div class="fase-icon">üè†</div>
                    <div class="fase-content">
                        <h3>Nuestro Primer Hogar</h3>
                        <p>El d√≠a que firmemos nuestro primer hogar juntos. Da igual si es grande o peque√±o, si es en el norte o en el sur, mientras sea NUESTRO hogar, ah√≠ seremos felices.</p>
                    </div>
                </div>

                <div class="fase-vida">
                    <div class="fase-icon">üíç</div>
                    <div class="fase-content">
                        <h3>Nuestra Boda</h3>
                        <p>El d√≠a que nos digamos "S√≠, quiero" frente a todos. Celebrar nuestro amor con familia y amigos, oficializar lo que nuestros corazones ya saben hace tiempo.</p>
                    </div>
                </div>

                <div class="fase-vida">
                    <div class="fase-icon">üêæ</div>
                    <div class="fase-content">
                        <h3>Nuestra Primera Mascota</h3>
                        <p>Ese gordo salchicha o Golden Retriever que nos acompa√±ar√° en nuestras aventuras. Ser√° nuestro primer "hijo" antes de los humanos jaja.</p>
                    </div>
                </div>

                <div class="fase-vida">
                    <div class="fase-icon">üë∂</div>
                    <div class="fase-content">
                        <h3>Nuestra Familia</h3>
                        <p>Cuando llegue nuestro primer hijo, y luego el segundo. Un ni√±o y una ni√±a, como siempre hemos so√±ado. Verlos crecer en un hogar lleno de amor.</p>
                    </div>
                </div>

                <div class="fase-vida">
                    <div class="fase-icon">üåç</div>
                    <div class="fase-content">
                        <h3>Viajar por el Mundo</h3>
                        <p>Conocer juntos todos esos lugares que hemos so√±ado. Esta vez sin despedirnos, porque estaremos juntos en cada viaje, en cada aventura.</p>
                    </div>
                </div>

                <div class="fase-vida">
                    <div class="fase-icon">üë¥üëµ</div>
                    <div class="fase-content">
                        <h3>Envejecer Juntos</h3>
                        <p>Ver nuestros cabellos volverse grises, nuestros nietos correr en el jard√≠n, y recordar toda esta historia de amor que comenz√≥ a distancia.</p>
                    </div>
                </div>
            </div>

            <div class="mensaje-corazon">
                <p>Mientras tengamos todo y estemos <span class="enfasis">1 a 1 en ese hogar</span>, sabremos que <span class="enfasis">todo vali√≥ la pena</span> despu√©s de la distancia.</p>
                
                <div class="destacado">
                    <p><strong>Las peleas, las discusiones, los lloros, los mimos, las caricias...</strong> Todo en s√≠ sabremos que dio frutos a algo perfecto. Cada obst√°culo que superamos juntos nos hizo m√°s fuertes, cada l√°grima derramada vali√≥ la pena, cada kil√≥metro de distancia nos prepar√≥ para valorar cada segundo juntos.</p>
                </div>
                
                <p>La distancia nos ense√±√≥ a amarnos de formas que nunca imaginamos. Las peleas nos ense√±aron a comunicarnos mejor. Los lloros nos ense√±aron a consolarnos. Los mimos nos ense√±aron a valorar cada caricia. Y todo esto, absolutamente todo, <span class="enfasis">dio frutos a algo perfecto: NOSOTROS</span>.</p>
                
                <p>Cuando estemos en ese hogar, con nuestros hijos jugando, con nuestro gordo salchicha o Golden corriendo por ah√≠, despertando juntos cada ma√±ana y durmiendo abrazados cada noche... miraremos atr√°s y diremos: <span class="enfasis">"Vali√≥ cada segundo de espera"</span>.</p>
            </div>

            <div class="promesa-final">
                <h2>üíñ Te Amo, Te Amo, TE AMO üíñ</h2>
                <p>Prometo construir ese futuro contigo.</p>
                <p>Prometo darte ese hogar que tanto so√±amos.</p>
                <p>Prometo ser el mejor padre para nuestros hijos.</p>
                <p>Prometo amarte en la salud y en la enfermedad.</p>
                <p>Prometo que cada d√≠a de nuestra vida juntos ser√° mejor que el anterior.</p>
                <p class="grito-amor">¬°Nunca me abandones bb!</p>
                <p class="grito-amor">¬°Porque yo nunca te abandonar√©!</p>
                <p style="font-size: 2em; margin-top: 40px;">
                    <strong>Te amo hoy, te amar√© ma√±ana, te amar√© siempre.</strong>
                </p>
                <p style="font-size: 1.8em;">
                    üåà Nuestro mejor cap√≠tulo est√° por comenzar... üíï
                </p>
            </div>
        </div>
    </div>

    <script>
        // ============ PLAYLIST DE CANCIONES ============
        const playlist = [
            { file: 'assent/Die-With-A-Smile.mp3', name: 'Die With A Smile' },
            { file: 'assent/i-wish-i-hated-you.mp3', name: 'I Wish I Hated You' },
            { file: 'assent/blue.mp3', name: 'Blue' },
            { file: 'assent/Beautiful-Things.mp3', name: 'Beautiful Things' },
            { file: 'assent/There-You-Are.mp3', name: 'There You Are' },
            { file: 'assent/WILDFLOWER.mp3', name: 'Wildflower' },
            { file: 'assent/No-One-Noticed.mp3', name: 'No One Noticed' },
            { file: 'assent/The-First-Time.mp3', name: 'The First Time' },
            { file: 'assent/Indigo.mp3', name: 'Indigo' },
            { file: 'assent/With-You.mp3', name: 'With You' },
            { file: 'assent/number-one-girl.mp3', name: 'Number One Girl' },
            { file: 'assent/TWENTIES.mp3', name: 'Twenties' }
        ];

        // ============ CONTROL DE M√öSICA ============
        const audio = document.getElementById('backgroundMusic');
        const musicControl = document.getElementById('musicControl');
        const musicIcon = document.getElementById('musicIcon');
        const musicText = document.getElementById('musicText');
        const songInfo = document.getElementById('songInfo');
        const currentSongName = document.getElementById('currentSongName');
        let isPlaying = false;
        let currentSongIndex = 0;

        // Configurar volumen al 70%
        audio.volume = 0.7;

        // Cargar una canci√≥n
        function loadSong(index) {
            currentSongIndex = index;
            audio.src = playlist[index].file;
            currentSongName.textContent = playlist[index].name;
            saveMusicState(isPlaying, 0, index);
        }

        // Reproducir siguiente canci√≥n
        function playNextSong() {
            currentSongIndex = (currentSongIndex + 1) % playlist.length;
            loadSong(currentSongIndex);
            if (isPlaying) {
                audio.play().catch(e => console.log('Error al reproducir siguiente:', e));
            }
        }

        // Cuando termina una canci√≥n, reproducir la siguiente
        audio.addEventListener('ended', playNextSong);

        // Guardar el estado de la m√∫sica en localStorage
        function saveMusicState(playing, time, songIndex) {
            localStorage.setItem('musicPlaying', playing);
            localStorage.setItem('musicTime', time);
            localStorage.setItem('currentSong', songIndex);
        }

        // Cargar el estado de la m√∫sica desde localStorage
        function loadMusicState() {
            const wasPlaying = localStorage.getItem('musicPlaying') === 'true';
            const savedTime = parseFloat(localStorage.getItem('musicTime')) || 0;
            const savedSong = parseInt(localStorage.getItem('currentSong')) || 0;
            
            // Cargar la canci√≥n guardada
            loadSong(savedSong);
            
            if (wasPlaying) {
                audio.currentTime = savedTime;
                audio.play().then(() => {
                    isPlaying = true;
                    updateMusicButton();
                    showSongInfo();
                }).catch(e => console.log('Error auto-reproduciendo:', e));
            }
        }

        // Mostrar/ocultar informaci√≥n de la canci√≥n
        function showSongInfo() {
            songInfo.style.display = 'block';
        }

        function hideSongInfo() {
            songInfo.style.display = 'none';
        }

        // Actualizar el estado visual del bot√≥n
        function updateMusicButton() {
            if (isPlaying) {
                musicIcon.textContent = '‚è∏Ô∏è';
                musicText.textContent = 'Pausar M√∫sica';
                musicControl.classList.add('playing');
                showSongInfo();
            } else {
                musicIcon.textContent = 'üéµ';
                musicText.textContent = 'Reproducir M√∫sica';
                musicControl.classList.remove('playing');
                hideSongInfo();
            }
        }

        // Toggle de reproducci√≥n
        musicControl.addEventListener('click', function() {
            if (isPlaying) {
                audio.pause();
                isPlaying = false;
                saveMusicState(false, audio.currentTime, currentSongIndex);
            } else {
                audio.play().then(() => {
                    isPlaying = true;
                    saveMusicState(true, audio.currentTime, currentSongIndex);
                }).catch(e => console.log('Error reproduciendo:', e));
            }
            updateMusicButton();
        });

        // Guardar el tiempo actual cada segundo cuando est√° reproduci√©ndose
        audio.addEventListener('timeupdate', function() {
            if (isPlaying) {
                saveMusicState(true, audio.currentTime, currentSongIndex);
            }
        });

        // Actualizar estado cuando comienza a reproducir
        audio.addEventListener('play', function() {
            isPlaying = true;
            updateMusicButton();
        });

        // Actualizar estado cuando se pausa
        audio.addEventListener('pause', function() {
            if (!audio.ended) {
                isPlaying = false;
                updateMusicButton();
            }
        });

        // Guardar estado antes de salir de la p√°gina
        window.addEventListener('beforeunload', function() {
            if (isPlaying) {
                saveMusicState(true, audio.currentTime, currentSongIndex);
            }
        });

        // ============ RESTO DEL C√ìDIGO ORIGINAL ============
        function crearEstrellas() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 200; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }

        function crearArcoiris() {
            const arcoirisContainer = document.getElementById('arcoiris');
            const colores = ['#FF0000', '#FF7F00', '#FFFF00', '#00FF00', '#0000FF', '#4B0082', '#9400D3'];
            
            for (let i = 0; i < 3; i++) {
                const arcoiris = document.createElement('div');
                arcoiris.className = 'arcoiris';
                arcoiris.style.borderColor = colores[i % colores.length];
                arcoiris.style.left = (Math.random() * 80) + '%';
                arcoiris.style.top = (Math.random() * 80) + '%';
                arcoiris.style.animationDelay = (i * 3) + 's';
                arcoirisContainer.appendChild(arcoiris);
            }
        }

        function crearCorazon() {
            const corazones = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíì', 'üíù', 'üíç', 'üåà', 'üë∂', 'üè°', 'üêï'];
            const corazon = document.createElement('div');
            corazon.className = 'corazon';
            corazon.textContent = corazones[Math.floor(Math.random() * corazones.length)];
            corazon.style.left = Math.random() * 100 + '%';
            corazon.style.bottom = '-50px';
            document.body.appendChild(corazon);
            setTimeout(() => corazon.remove(), 4000);
        }

        // Animaci√≥n de aparici√≥n
        const observador = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, { threshold: 0.1 });

        window.addEventListener('DOMContentLoaded', () => {
            crearEstrellas();
            crearArcoiris();
            setInterval(crearCorazon, 600);
            loadMusicState();
            
            // Animar elementos
            document.querySelectorAll('.sueno, .fase-content').forEach(el => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(30px)';
                el.style.transition = 'all 0.6s ease-out';
                observador.observe(el);
            });
        });
    </script>
</body>
</html>
